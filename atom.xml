<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ©™å­ğŸŠ</title>
  
  
  <link href="https://beibidesr.github.io/atom.xml" rel="self"/>
  
  <link href="https://beibidesr.github.io/"/>
  <updated>2023-11-01T18:53:14.038Z</updated>
  <id>https://beibidesr.github.io/</id>
  
  <author>
    <name>æ©™å­ğŸŠ</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>tagspaceæ–‡æœ¬åˆ†ç±»æ¨¡å‹</title>
    <link href="https://beibidesr.github.io/posts/cafb114d.html"/>
    <id>https://beibidesr.github.io/posts/cafb114d.html</id>
    <published>2023-11-01T18:49:28.000Z</published>
    <updated>2023-11-01T18:53:14.038Z</updated>
    
    <content type="html"><![CDATA[<h1>tagspaceæ–‡æœ¬åˆ†ç±»æ¨¡å‹</h1><p><strong><a href="https://aistudio.baidu.com/aistudio/projectdetail/3238891">AI Studioåœ¨çº¿è¿è¡Œç¯å¢ƒ</a></strong></p><p>ä»¥ä¸‹æ˜¯æœ¬ä¾‹çš„ç®€è¦ç›®å½•ç»“æ„åŠè¯´æ˜ï¼š</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ data <span class="meta">#æ ·ä¾‹æ•°æ®</span></span><br><span class="line">    â”œâ”€â”€ train_data</span><br><span class="line">        â”œâ”€â”€ small_train.csv <span class="meta">#è®­ç»ƒæ•°æ®æ ·ä¾‹</span></span><br><span class="line">    â”œâ”€â”€ test_data</span><br><span class="line">        â”œâ”€â”€ small_test.csv <span class="meta">#æµ‹è¯•æ•°æ®æ ·ä¾‹</span></span><br><span class="line">    â”œâ”€â”€ text2paddle.py <span class="meta">#æ•°æ®å¤„ç†ç¨‹åº</span></span><br><span class="line">â”œâ”€â”€ __init__.py</span><br><span class="line">â”œâ”€â”€ README.md <span class="meta">#æ–‡æ¡£</span></span><br><span class="line">â”œâ”€â”€ config.yaml <span class="meta"># sampleæ•°æ®é…ç½®</span></span><br><span class="line">â”œâ”€â”€ config_bigdata.yaml <span class="meta"># å…¨é‡æ•°æ®é…ç½®</span></span><br><span class="line">â”œâ”€â”€ net.py <span class="meta"># æ¨¡å‹æ ¸å¿ƒç»„ç½‘ï¼ˆåŠ¨é™ç»Ÿä¸€ï¼‰</span></span><br><span class="line">â”œâ”€â”€ agnew<span class="type">s_reader</span>.py <span class="meta">#æ•°æ®è¯»å–ç¨‹åº</span></span><br><span class="line">â”œâ”€â”€ static_model.py <span class="meta"># æ„å»ºé™æ€å›¾</span></span><br><span class="line">â”œâ”€â”€ dygraph_model.py <span class="meta"># æ„å»ºåŠ¨æ€å›¾</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šåœ¨é˜…è¯»è¯¥ç¤ºä¾‹å‰ï¼Œå»ºè®®æ‚¨å…ˆäº†è§£ä»¥ä¸‹å†…å®¹ï¼š</p><p><a href="https://github.com/PaddlePaddle/PaddleRec/blob/master/README.md">paddlerecå…¥é—¨æ•™ç¨‹</a><br><a href="https://paddlerec.readthedocs.io/en/latest/models/contentunderstanding/tagspace.html">tagespace</a></p><h2 id="å†…å®¹">å†…å®¹</h2><ul><li><a href="#tagspace%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB%E6%A8%A1%E5%9E%8B">tagspaceæ–‡æœ¬åˆ†ç±»æ¨¡å‹</a><ul><li><a href="#%E5%86%85%E5%AE%B9">å†…å®¹</a></li><li><a href="#%E6%A8%A1%E5%9E%8B%E7%AE%80%E4%BB%8B">æ¨¡å‹ç®€ä»‹</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87">æ•°æ®å‡†å¤‡</a></li><li><a href="#%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">è¿è¡Œç¯å¢ƒ</a></li><li><a href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">å¿«é€Ÿå¼€å§‹</a></li><li><a href="#%E6%A8%A1%E5%9E%8B%E7%BB%84%E7%BD%91">æ¨¡å‹ç»„ç½‘</a></li><li><a href="#%E6%95%88%E6%9E%9C%E5%A4%8D%E7%8E%B0">æ•ˆæœå¤ç°</a></li><li><a href="#%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8">è¿›é˜¶ä½¿ç”¨</a></li><li><a href="#faq">FAQ</a></li></ul></li></ul><h2 id="æ¨¡å‹ç®€ä»‹">æ¨¡å‹ç®€ä»‹</h2><p>tagspaceæ¨¡å‹æ˜¯ä¸€ç§å¯¹æ–‡æœ¬æ‰“æ ‡ç­¾çš„æ–¹æ³•ï¼Œæ¥è‡ªè®ºæ–‡è®ºæ–‡<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.668.2094&amp;rep=rep1&amp;type=pdf">TAGSPACE: Semantic Embeddings from Hashtags</a>ï¼Œå®ƒä¸»è¦å­¦ä¹ ä»çŸ­æ–‡åˆ°ç›¸å…³ä¸»é¢˜æ ‡ç­¾çš„æ˜ å°„ã€‚è®ºæ–‡ä¸­ä¸»è¦åˆ©ç”¨CNNåšdocå‘é‡ï¼Œ ç„¶åä¼˜åŒ– f(w,t+),f(w,t-)çš„è·ç¦»ä½œä¸ºç›®æ ‡å‡½æ•°ï¼Œå¾—åˆ°äº† tï¼ˆæ ‡ç­¾ï¼‰å’Œdocåœ¨ä¸€ä¸ªç‰¹å¾ç©ºé—´çš„å‘é‡è¡¨è¾¾ï¼Œè¿™æ ·å°±å¯ä»¥æ‰¾ docçš„hashtagsäº†ã€‚</p><h2 id="æ•°æ®å‡†å¤‡">æ•°æ®å‡†å¤‡</h2><p>æœ¬æ¨¡å‹ä½¿ç”¨è®ºæ–‡ä¸­çš„ag_newsæ•°æ®é›†ï¼Œåœ¨æ¨¡å‹ç›®å½•çš„dataç›®å½•ä¸‹ä¸ºæ‚¨å‡†å¤‡äº†å¿«é€Ÿè¿è¡Œçš„ç¤ºä¾‹æ•°æ®ï¼Œè‹¥éœ€è¦ä½¿ç”¨å…¨é‡æ•°æ®å¯ä»¥å‚è€ƒä¸‹æ–¹<a href="#%E6%95%88%E6%9E%9C%E5%A4%8D%E7%8E%B0">æ•ˆæœå¤ç°</a>éƒ¨åˆ†ï¼Œæ•°æ®çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">2</span>,<span class="number">27</span> <span class="number">7062</span> <span class="number">8390</span> <span class="number">456</span> <span class="number">407</span> <span class="number">8</span> <span class="number">11589</span> <span class="number">3166</span> <span class="number">4</span> <span class="number">7278</span> <span class="number">31046</span> <span class="number">33</span> <span class="number">3898</span> <span class="number">2897</span> <span class="number">426</span> <span class="number">1</span></span><br><span class="line"><span class="attribute">2</span>,<span class="number">27</span> <span class="number">9493</span> <span class="number">836</span> <span class="number">355</span> <span class="number">20871</span> <span class="number">300</span> <span class="number">81</span> <span class="number">19</span> <span class="number">3</span> <span class="number">4125</span> <span class="number">9</span> <span class="number">449</span> <span class="number">462</span> <span class="number">13832</span> <span class="number">6</span> <span class="number">16570</span> <span class="number">1380</span> <span class="number">2874</span> <span class="number">5</span> <span class="number">0</span> <span class="number">797</span> <span class="number">236</span> <span class="number">19</span> <span class="number">3688</span> <span class="number">2106</span> <span class="number">14</span> <span class="number">8615</span> <span class="number">7</span> <span class="number">209</span> <span class="number">304</span> <span class="number">4</span> <span class="number">0</span> <span class="number">123</span> <span class="number">1</span></span><br><span class="line"><span class="attribute">2</span>,<span class="number">27</span> <span class="number">12754</span> <span class="number">637</span> <span class="number">106</span> <span class="number">3839</span> <span class="number">1532</span> <span class="number">66</span> <span class="number">0</span> <span class="number">379</span> <span class="number">6</span> <span class="number">0</span> <span class="number">1246</span> <span class="number">9</span> <span class="number">307</span> <span class="number">33</span> <span class="number">161</span> <span class="number">2</span> <span class="number">8100</span> <span class="number">36</span> <span class="number">0</span> <span class="number">350</span> <span class="number">123</span> <span class="number">101</span> <span class="number">74</span> <span class="number">181</span> <span class="number">0</span> <span class="number">6657</span> <span class="number">4</span> <span class="number">0</span> <span class="number">1222</span> <span class="number">17195</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œè¯¥æ•°æ®é›†çš„æ ¼å¼ä¸ºï¼š<code>label,hashtag1,hashtag2,...,hashtagN</code>ï¼Œå…¶ä¸­labelä¸ºæ–‡æœ¬çš„æ ‡ç­¾ï¼Œhashtagä¸ºæ–‡æœ¬çš„hashtagã€‚æ‰€ä»¥åœ¨æœ€åè¿›è¡Œæ¨ç†è¿‡ç¨‹ä¸­æ˜¯ä½¿ç”¨è®¡ç®—ç›¸ä¼¼åº¦çš„æ–¹æ³•å¾—åˆ°æŸå¤±å‡½æ•°ã€‚</p><h2 id="è¿è¡Œç¯å¢ƒ">è¿è¡Œç¯å¢ƒ</h2><p>PaddlePaddle&gt;=2.0</p><p>python 2.7/3.5/3.6/3.7</p><p>os : windows/linux/macos</p><h2 id="å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</h2><p>æœ¬æ–‡æä¾›äº†æ ·ä¾‹æ•°æ®å¯ä»¥ä¾›æ‚¨å¿«é€Ÿä½“éªŒï¼Œåœ¨ä»»æ„ç›®å½•ä¸‹å‡å¯æ‰§è¡Œã€‚åœ¨tagspaceæ¨¡å‹ç›®å½•çš„å¿«é€Ÿæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥æ¨¡å‹ç›®å½•</span></span><br><span class="line"><span class="comment"># cd models/contentunderstanding/tagspace # åœ¨ä»»æ„ç›®å½•å‡å¯è¿è¡Œ</span></span><br><span class="line"><span class="comment"># åŠ¨æ€å›¾è®­ç»ƒ</span></span><br><span class="line">python -u ../../../tools/trainer.py -m config.yaml <span class="comment"># å…¨é‡æ•°æ®è¿è¡Œconfig_bigdata.yaml </span></span><br><span class="line"><span class="comment"># åŠ¨æ€å›¾é¢„æµ‹</span></span><br><span class="line">python -u ../../../tools/infer.py -m config.yaml </span><br><span class="line"></span><br><span class="line"><span class="comment"># é™æ€å›¾è®­ç»ƒ</span></span><br><span class="line">python -u ../../../tools/static_trainer.py -m config.yaml <span class="comment"># å…¨é‡æ•°æ®è¿è¡Œconfig_bigdata.yaml </span></span><br><span class="line"><span class="comment"># é™æ€å›¾é¢„æµ‹</span></span><br><span class="line">python -u ../../../tools/static_infer.py -m config.yaml </span><br></pre></td></tr></table></figure><h2 id="æ¨¡å‹ç»„ç½‘">æ¨¡å‹ç»„ç½‘</h2><p>è®ºæ–‡<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.668.2094&amp;rep=rep1&amp;type=pdf">TAGSPACE: Semantic Embeddings from Hashtags</a>ä¸­çš„ç½‘ç»œç»“æ„å¦‚å›¾æ‰€ç¤ºï¼Œä¸€å±‚è¾“å…¥å±‚ï¼Œä¸€ä¸ªå·ç§¯å±‚ï¼Œä¸€ä¸ªpoolingå±‚ä»¥åŠæœ€åä¸€ä¸ªå…¨è¿æ¥å±‚è¿›è¡Œé™ç»´ã€‚</p><p align="center"><img align="center" src="../../../doc/imgs/tagspace.png"><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé€šè¿‡VScodeå¯¹è¯¥ä»£ç è¿›è¡Œdebugåèƒ½å¤Ÿå¾—åˆ°ï¼Œè¯¥æ¨¡å‹ä½¿ç”¨äº†å·ç§¯ç¥ç»ç½‘ç»œå¯¹äºæ–‡æœ¬å¾—åˆ°çš„embeddingè¿›è¡Œå·ç§¯å¤„ç†ï¼Œå†è¿›è¡Œpoolingå¤„ç†ï¼Œæœ€åè¿›è¡Œå…¨è¿æ¥é™ç»´ã€‚loss functionæ˜¯é€šè¿‡è®¡ç®—coså‡½æ•°å¾—åˆ°ç›¸ä¼¼åº¦çš„å·®è·æ¥è¿›è¡Œæ±‚å¯¼ã€‚## æ•ˆæœå¤ç°ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è€…èƒ½å¤Ÿå¿«é€Ÿçš„è·‘é€šæ¯ä¸€ä¸ªæ¨¡å‹ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªæ¨¡å‹ä¸‹éƒ½æä¾›äº†æ ·ä¾‹æ•°æ®ã€‚å¦‚æœéœ€è¦å¤ç°readmeä¸­çš„æ•ˆæœ,è¯·æŒ‰å¦‚ä¸‹æ­¥éª¤ä¾æ¬¡æ“ä½œå³å¯ã€‚  åœ¨å…¨é‡æ•°æ®ä¸‹æ¨¡å‹çš„æŒ‡æ ‡å¦‚ä¸‹ï¼š<table><thead><tr><th style="text-align:left">æ¨¡å‹</th><th style="text-align:left">acc</th><th style="text-align:left">batch_size</th><th style="text-align:left">epoch_num</th><th style="text-align:left">Time of each epoch</th></tr></thead><tbody><tr><td style="text-align:left">tagspace</td><td style="text-align:left">0.97</td><td style="text-align:left">128</td><td style="text-align:left">1</td><td style="text-align:left">çº¦7åˆ†é’Ÿ</td></tr></tbody></table><ol><li>ç¡®è®¤æ‚¨å½“å‰æ‰€åœ¨ç›®å½•ä¸ºPaddleRec/models/contentunderstanding/tagspace</li><li>è¿›å…¥paddlerec/datasets/ag_newsç›®å½•ä¸‹ï¼Œæ‰§è¡Œè¯¥è„šæœ¬ï¼Œä¼šä»å›½å†…æºçš„æœåŠ¡å™¨ä¸Šä¸‹è½½æˆ‘ä»¬é¢„å¤„ç†å®Œæˆçš„ag_newså…¨é‡æ•°æ®é›†ï¼Œå¹¶è§£å‹åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ../../../datasets/ag_news</span><br><span class="line">sh run.sh</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ‡å›æ¨¡å‹ç›®å½•,æ‰§è¡Œå‘½ä»¤è¿è¡Œå…¨é‡æ•°æ®</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> - <span class="comment"># åˆ‡å›æ¨¡å‹ç›®å½•</span></span><br><span class="line"><span class="comment"># åŠ¨æ€å›¾è®­ç»ƒ</span></span><br><span class="line">python -u ../../../tools/trainer.py -m config_bigdata.yaml <span class="comment"># å…¨é‡æ•°æ®è¿è¡Œconfig_bigdata.yaml </span></span><br><span class="line">python -u ../../../tools/infer.py -m config_bigdata.yaml <span class="comment"># å…¨é‡æ•°æ®è¿è¡Œconfig_bigdata.yaml </span></span><br></pre></td></tr></table></figure><h2 id="è¿›é˜¶ä½¿ç”¨">è¿›é˜¶ä½¿ç”¨</h2><h2 id="FAQ">FAQ</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;tagspaceæ–‡æœ¬åˆ†ç±»æ¨¡å‹&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://aistudio.baidu.com/aistudio/projectdetail/3238891&quot;&gt;AI Studioåœ¨çº¿è¿è¡Œç¯å¢ƒ&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä»¥</summary>
      
    
    
    
    <category term="NLP" scheme="https://beibidesr.github.io/categories/NLP/"/>
    
    
    <category term="è®ºæ–‡" scheme="https://beibidesr.github.io/tags/%E8%AE%BA%E6%96%87/"/>
    
    <category term="æ¨è" scheme="https://beibidesr.github.io/tags/%E6%8E%A8%E8%8D%90/"/>
    
    <category term="æ–‡æœ¬åˆ†ç±»" scheme="https://beibidesr.github.io/tags/%E6%96%87%E6%9C%AC%E5%88%86%E7%B1%BB/"/>
    
  </entry>
  
  <entry>
    <title>å•è°ƒé˜Ÿåˆ—åœ¨æ•°æ®ç»“æ„ä¸­çš„åº”ç”¨</title>
    <link href="https://beibidesr.github.io/posts/1dad47c4.html"/>
    <id>https://beibidesr.github.io/posts/1dad47c4.html</id>
    <published>2023-10-27T15:54:30.000Z</published>
    <updated>2023-10-27T16:12:10.219Z</updated>
    
    <content type="html"><![CDATA[<h1>1.Introduction</h1><p>å•è°ƒé˜Ÿåˆ—æ˜¯æ•°æ®ç»“æ„ä¸­çš„ä¸€ç§ï¼Œå…¶ä½œç”¨æ˜¯ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­çš„å…ƒç´ æ˜¯å•è°ƒé€’å¢æˆ–è€…å•è°ƒé€’å‡çš„ï¼Œå¹¶ä¸”é˜Ÿåˆ—ä¸­çš„å…ƒç´ éƒ½æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„ã€‚å•è°ƒé˜Ÿåˆ—å¯ä»¥ç”¨äºè§£å†³å¾ˆå¤šé—®é¢˜ï¼Œä¾‹å¦‚æ±‚è§£æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œæ±‚è§£æ»‘åŠ¨çª—å£ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œæ±‚è§£æ»‘åŠ¨çª—å£ä¸­æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼ç­‰ç­‰ã€‚</p><h1>2.Leetcodeé¢˜ç›®</h1><h2 id="2-1-Sliding-Window-Maximum">2.1.Sliding Window Maximum</h2><h3 id="2-1-1-é¢˜ç›®æè¿°">2.1.1.é¢˜ç›®æè¿°</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œæ»‘åŠ¨çª—å£çš„å¤§å° kï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼ã€‚</p><h3 id="2-1-2-ç¤ºä¾‹">2.1.2.ç¤ºä¾‹</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: nums = <span class="string">[1,3,-1,-3,5,3,6,7]</span>, å’Œ k = <span class="number">3</span></span><br><span class="line">è¾“å‡º: <span class="string">[3,3,5,5,6,7]</span>    </span><br></pre></td></tr></table></figure><h3 id="2-1-3-è§£é¢˜æ€è·¯">2.1.3.è§£é¢˜æ€è·¯</h3><p>æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å•è°ƒé˜Ÿåˆ—æ¥è§£å†³ã€‚æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡çš„é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—ä¸­çš„å…ƒç´ æ˜¯å•è°ƒé€’å‡çš„ï¼Œå¹¶ä¸”é˜Ÿåˆ—ä¸­çš„å…ƒç´ éƒ½æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„ã€‚åœ¨æ»‘åŠ¨çª—å£ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡å°†ä¸€ä¸ªå…ƒç´ åŠ å…¥é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­å·²ç»å­˜åœ¨äº†æ»‘åŠ¨çª—å£ä¹‹å¤–çš„å…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°†é˜Ÿåˆ—ä¸­å·²ç»å­˜åœ¨çš„å…ƒç´ ç§»é™¤ã€‚å½“æ»‘åŠ¨çª—å£çš„å¤§å°ä¸º k æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼ã€‚</p><h3 id="2-1-4-ä»£ç å®ç°">2.1.4.ä»£ç å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maxSlidingWindow</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span><br><span class="line">        ans = []</span><br><span class="line">        q = deque()</span><br><span class="line">        <span class="keyword">for</span> i, x <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            <span class="keyword">while</span> q <span class="keyword">and</span> nums[q[-<span class="number">1</span>]] &lt;= x:</span><br><span class="line">                q.pop()</span><br><span class="line">            q.append(i)</span><br><span class="line">            <span class="keyword">if</span> i - q[<span class="number">0</span>] &gt;= k:</span><br><span class="line">                q.popleft()</span><br><span class="line">            <span class="keyword">if</span> i &gt;= k - <span class="number">1</span>:</span><br><span class="line">                ans.append(nums[q[<span class="number">0</span>]])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å•è°ƒé˜Ÿåˆ—åœ¨Leetcodeä¸­çš„åº”ç”¨å­¦ä¹ </summary>
    
    
    
    <category term="Leetcode" scheme="https://beibidesr.github.io/categories/Leetcode/"/>
    
    
    <category term="æ•°å­¦" scheme="https://beibidesr.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="https://beibidesr.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    <category term="å•è°ƒé˜Ÿåˆ—" scheme="https://beibidesr.github.io/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/"/>
    
    <category term="Leetcode" scheme="https://beibidesr.github.io/tags/Leetcode/"/>
    
  </entry>
  
  <entry>
    <title>éšä¾¿å†™å†™</title>
    <link href="https://beibidesr.github.io/posts/380483a.html"/>
    <id>https://beibidesr.github.io/posts/380483a.html</id>
    <published>2023-10-19T10:11:05.000Z</published>
    <updated>2023-10-19T10:11:05.624Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>LLEMMAåŸºäºæ•°å­¦çš„é—®ç­”è¯­è¨€æ¨¡å‹å­¦ä¹ è®°å½•</title>
    <link href="https://beibidesr.github.io/posts/bdb6f40d.html"/>
    <id>https://beibidesr.github.io/posts/bdb6f40d.html</id>
    <published>2023-10-19T09:19:03.000Z</published>
    <updated>2023-10-19T09:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1>1.Introduction</h1><div class="note info flat"><p>å‚è€ƒï¼š<a href="https://blog.eleuther.ai/llemma/">Llemmaï¼šå¼€æ”¾çš„æ•°å­¦è¯­è¨€æ¨¡å‹</a></p></div><h2 id="1-1-LIemmaæ¨¡å‹ä»‹ç»">1.1 LIemmaæ¨¡å‹ä»‹ç»</h2><p>å¦‚å›¾æ‰€ç¤ºï¼ŒLlemma æ¨¡å‹ä½¿ç”¨ Code Llama æƒé‡è¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶ååœ¨ Proof-Pile IIï¼ˆä¸€ä¸ªåŒ…å« 550 äº¿ä¸ªæ•°å­¦å’Œç§‘å­¦æ–‡æ¡£çš„ä»¤ç‰Œæ•°æ®é›†ï¼‰ä¸Šè¿›è¡Œè®­ç»ƒã€‚ç”±æ­¤äº§ç”Ÿçš„æ¨¡å‹æ˜¾ç¤ºå‡ºæ”¹è¿›çš„æ•°å­¦èƒ½åŠ›ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡æç¤ºæˆ–é¢å¤–çš„å¾®è°ƒæ¥é€‚åº”å„ç§ä»»åŠ¡ `<img src="https://blog.eleuther.ai/images/blog/llemma/llemma_diagram.jpeg" alt="L1emmaæ¨¡å‹æµç¨‹å›¾"></p><h2 id="1-2-æ¯”è¾ƒæœ‰æ„æ€çš„è®­ç»ƒæ–¹æ³•ï¼Œä¹Ÿæ˜¯è¯­è¨€æ¨¡å‹å¾®è°ƒå¸¸ç”¨æ–¹æ³•">1.2 æ¯”è¾ƒæœ‰æ„æ€çš„è®­ç»ƒæ–¹æ³•ï¼Œä¹Ÿæ˜¯è¯­è¨€æ¨¡å‹å¾®è°ƒå¸¸ç”¨æ–¹æ³•</h2><p>è¿™æ®µä»£ç æ˜¯åœ¨è®­ç»ƒä¸€ä¸ªåŸºäºLLMï¼ˆè¯­è¨€æ¨¡å‹ï¼‰çš„æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> è§£æå‘½ä»¤è¡Œå‚æ•°ï¼ŒåŒ…æ‹¬æ¨¡å‹ã€æ•°æ®å’Œè®­ç»ƒå‚æ•°ã€‚</span><br><span class="line"><span class="bullet">2.</span> ä»é¢„è®­ç»ƒæ¨¡å‹ä¸­åŠ è½½æ¨¡å‹æ¶æ„ã€‚</span><br><span class="line"><span class="bullet">3.</span> ä½¿ç”¨æŒ‡å®šçš„åˆ†è¯å™¨å¯¹è¾“å…¥æ•°æ®è¿›è¡Œç¼–ç ã€‚</span><br><span class="line"><span class="bullet">4.</span> å¦‚æœåˆ†è¯å™¨æ²¡æœ‰å¡«å……æ ‡è®°ï¼Œåˆ™æ·»åŠ é»˜è®¤çš„å¡«å……æ ‡è®°ã€‚</span><br><span class="line"><span class="bullet">5.</span> å¦‚æœæ¨¡å‹åç§°åŒ…å«&quot;llama&quot;ï¼Œåˆ™ä¸ºåˆ†è¯å™¨æ·»åŠ ç‰¹æ®Šçš„ç»“æŸç¬¦ã€å¼€å§‹ç¬¦å’ŒæœªçŸ¥æ ‡è®°ã€‚</span><br><span class="line"><span class="bullet">6.</span> ä½¿ç”¨åˆ†è¯å™¨å’Œæ•°æ®å‚æ•°åˆ›å»ºä¸€ä¸ªç›‘ç£å¼æ•°æ®æ¨¡å—ã€‚</span><br><span class="line"><span class="bullet">7.</span> ä½¿ç”¨æ¨¡å‹ã€åˆ†è¯å™¨ã€è®­ç»ƒå‚æ•°å’Œæ•°æ®æ¨¡å—åˆ›å»ºä¸€ä¸ªè®­ç»ƒå™¨å¯¹è±¡ã€‚</span><br><span class="line"><span class="bullet">8.</span> ä½¿ç”¨è®­ç»ƒå™¨å¯¹è±¡è¿›è¡Œè®­ç»ƒã€‚</span><br><span class="line"><span class="bullet">9.</span> ä¿å­˜è®­ç»ƒå™¨çš„å½“å‰çŠ¶æ€ã€‚</span><br><span class="line"><span class="bullet">10.</span> å°†è®­ç»ƒå¥½çš„æ¨¡å‹ä¿å­˜åˆ°æŒ‡å®šçš„è¾“å‡ºç›®å½•ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">train</span>():</span><br><span class="line">    parser = transformers.HfArgumentParser((ModelArguments, DataArguments, TrainingArguments))</span><br><span class="line">    model_args, data_args, training_args, remaining_args = parser.parse_args_into_dataclasses(return_remaining_strings=<span class="literal">True</span>)</span><br><span class="line">    data_args.data_length = <span class="built_in">int</span>(remaining_args[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">    model = transformers.AutoModelForCausalLM.from_pretrained(</span><br><span class="line">        model_args.model_name_or_path,</span><br><span class="line">        cache_dir=training_args.cache_dir,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    tokenizer = transformers.AutoTokenizer.from_pretrained(</span><br><span class="line">        <span class="string">&quot;hf-internal-testing/llama-tokenizer&quot;</span>,</span><br><span class="line">        cache_dir=training_args.cache_dir,</span><br><span class="line">        model_max_length=training_args.model_max_length,</span><br><span class="line">        padding_side=<span class="string">&quot;right&quot;</span>,</span><br><span class="line">        use_fast=<span class="literal">False</span>,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">if</span> tokenizer.pad_token <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        smart_tokenizer_and_embedding_resize(</span><br><span class="line">            special_tokens_dict=<span class="built_in">dict</span>(pad_token=DEFAULT_PAD_TOKEN),</span><br><span class="line">            tokenizer=tokenizer,</span><br><span class="line">            model=model,</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;llama&quot;</span> <span class="keyword">in</span> model_args.model_name_or_path:</span><br><span class="line">        tokenizer.add_special_tokens(</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;eos_token&quot;</span>: DEFAULT_EOS_TOKEN,</span><br><span class="line">                <span class="string">&quot;bos_token&quot;</span>: DEFAULT_BOS_TOKEN,</span><br><span class="line">                <span class="string">&quot;unk_token&quot;</span>: DEFAULT_UNK_TOKEN,</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    data_module = make_supervised_data_module(tokenizer=tokenizer, data_args=data_args)</span><br><span class="line">    trainer = Trainer(model=model, tokenizer=tokenizer, args=training_args, **data_module)</span><br><span class="line">    trainer.train()</span><br><span class="line">    trainer.save_state()</span><br><span class="line">    <span class="comment"># if os.environ.get(&#x27;LOCAL_RANK&#x27;) == &#x27;0&#x27;:</span></span><br><span class="line">    safe_save_model_for_hf_trainer(trainer=trainer, output_dir=training_args.output_dir)</span><br></pre></td></tr></table></figure><h2 id="1-3-è®ºæ–‡è´ªå¿ƒæœç´¢çš„æºç çš„é˜…è¯»ä»¥åŠç†è§£">1.3 è®ºæ–‡è´ªå¿ƒæœç´¢çš„æºç çš„é˜…è¯»ä»¥åŠç†è§£</h2><p>æ–‡ç« ä½¿ç”¨äº†è´ªå¿ƒæœç´¢çš„ç­–ç•¥å¯¹äºæ•°æ®è¿›è¡Œä¸€å®šå¤„ç†ï¼Œä»£ç å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">best_first_search</span>(<span class="params"></span></span><br><span class="line"><span class="params">        theorem,</span></span><br><span class="line"><span class="params">        model,</span></span><br><span class="line"><span class="params">        tokenizer,</span></span><br><span class="line"><span class="params">        max_iters,</span></span><br><span class="line"><span class="params">        temperatures,</span></span><br><span class="line"><span class="params">        num_samples,</span></span><br><span class="line"><span class="params">        prompt_fn,</span></span><br><span class="line"><span class="params">        timeout=<span class="number">600</span>,</span></span><br><span class="line"><span class="params">        early_stop=<span class="literal">False</span>,</span></span><br><span class="line"><span class="params">        max_tokens=<span class="number">256</span></span></span><br><span class="line"><span class="params"></span>) -&gt; <span class="built_in">dict</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Best first search.&quot;&quot;&quot;</span></span><br><span class="line">    attempt_results = []</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> Dojo(theorem, hard_timeout=timeout) <span class="keyword">as</span> (dojo, init_state):</span><br><span class="line">            start = time.time()</span><br><span class="line">            proof_finished = <span class="literal">False</span></span><br><span class="line">            queue = [(<span class="number">0.0</span>, [], init_state, [])]</span><br><span class="line">            visited = <span class="built_in">set</span>()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> iteration <span class="keyword">in</span> trange(max_iters):</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(queue) == <span class="number">0</span> <span class="keyword">or</span> proof_finished:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                total_score, steps, state, trace = heapq.heappop(queue)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªåä¸º<code>best_first_search</code>çš„å‡½æ•°ï¼Œå®ƒå®ç°äº†ä¸€ç§ç§°ä¸º&quot;æœ€ä½³ä¼˜å…ˆæœç´¢&quot;ï¼ˆBest First Searchï¼‰çš„ç®—æ³•ã€‚è¿™ä¸ªç®—æ³•ç”¨äºåœ¨ç»™å®šçš„å®šç†å’Œæ¨¡å‹ä¸­å¯»æ‰¾è¯æ˜çš„æœ€ä½³è·¯å¾„ã€‚<br>å‡½æ•°æ¥å—ä»¥ä¸‹å‚æ•°ï¼š</p><ul><li><code>theorem</code>ï¼šéœ€è¦è¯æ˜çš„å®šç†å¯¹è±¡ã€‚</li><li><code>model</code>ï¼šç”¨äºç”Ÿæˆè¯æ˜çš„è¯­è¨€æ¨¡å‹ã€‚</li><li><code>tokenizer</code>ï¼šç”¨äºå°†æ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹å¯ä»¥ç†è§£çš„è¾“å…¥æ ¼å¼çš„åˆ†è¯å™¨ã€‚</li><li><code>max_iters</code>ï¼šæœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå³æœç´¢çš„æœ€å¤§æ·±åº¦ã€‚</li><li><code>temperatures</code>ï¼šä¸€ä¸ªæ¸©åº¦å€¼åˆ—è¡¨ï¼Œç”¨äºæ§åˆ¶è¯­è¨€æ¨¡å‹ç”Ÿæˆçš„æ¦‚ç‡åˆ†å¸ƒã€‚</li><li><code>num_samples</code>ï¼šæ¯ä¸ªæ­¥éª¤ä¸­ä»è¯­è¨€æ¨¡å‹ä¸­é‡‡æ ·çš„æ¬¡æ•°ã€‚</li><li><code>prompt_fn</code>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å½“å‰çš„çŠ¶æ€ç”Ÿæˆæç¤ºä¿¡æ¯ã€‚</li><li><code>timeout</code>ï¼šæœç´¢è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚</li><li><code>early_stop</code>ï¼šæ˜¯å¦åœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰æ•ˆè¯æ˜åæå‰åœæ­¢æœç´¢ã€‚</li><li><code>max_tokens</code>ï¼šç”Ÿæˆçš„æç¤ºä¿¡æ¯çš„æœ€å¤§é•¿åº¦ã€‚</li></ul><p>å‡½æ•°è¿”å›ä¸€ä¸ªå­—å…¸åˆ—è¡¨ï¼Œæ¯ä¸ªå­—å…¸åŒ…å«ä»¥ä¸‹é”®å€¼å¯¹ï¼š</p><ul><li><code>'theorem'</code>ï¼šå®šç†çš„å…¨åã€‚</li><li><code>'proof'</code>ï¼šè¯æ˜çš„æ­¥éª¤åºåˆ—ã€‚</li><li><code>'score'</code>ï¼šè¯æ˜çš„å¾—åˆ†ï¼Œè¡¨ç¤ºè¯¥è¯æ˜çš„è´¨é‡ã€‚</li><li><code>'success'</code>ï¼šè¯æ˜æ˜¯å¦æˆåŠŸã€‚</li><li><code>'failure_reason'</code>ï¼šè¯æ˜å¤±è´¥çš„åŸå› ã€‚</li><li><code>'trace'</code>ï¼šè¯æ˜è¿‡ç¨‹ä¸­çš„è½¨è¿¹ä¿¡æ¯ã€‚</li><li><code>'temperature'</code>ï¼šä½¿ç”¨çš„æ¨¡å‹æ¸©åº¦ã€‚</li><li><code>'elapsed'</code>ï¼šæœç´¢æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚</li><li><code>'iteration'</code>ï¼šå½“å‰çš„è¿­ä»£æ¬¡æ•°ã€‚</li></ul>]]></content>
    
    
    <summary type="html">ğŸ¥§LLEMMAåŸºäºæ•°å­¦çš„é—®ç­”è¯­è¨€æ¨¡å‹å­¦ä¹ è®°å½•</summary>
    
    
    
    <category term="NLP" scheme="https://beibidesr.github.io/categories/NLP/"/>
    
    
    <category term="Markdown" scheme="https://beibidesr.github.io/tags/Markdown/"/>
    
    <category term="è¯­è¨€æ¨¡å‹" scheme="https://beibidesr.github.io/tags/%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B/"/>
    
    <category term="L1mma" scheme="https://beibidesr.github.io/tags/L1mma/"/>
    
    <category term="æ•°å­¦" scheme="https://beibidesr.github.io/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
</feed>
